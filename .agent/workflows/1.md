---
description: first
---

# AI Agent Rules + Project Fix Plan (Livewire Only)
**Lugha:** Swahili  
**Stack:** Laravel + Livewire (System nzima iwe Livewire)  
**Priority:** Web UI + Mobile UI (Responsive) ✅

---

## 1) UI/UX RULES (WEB + MOBILE) ✅
### 1.1 Mobile-first
- Anza kubuni kwa simu (360px–430px), halafu scale hadi tablet (768px) na desktop (1024px+).
- Tap targets: minimum 44×44px.
- Cards, buttons, inputs ziwe touch-friendly.

### 1.2 Base System Colors (zinabaki)
- **Dark Green (Primary)**: `#0B5D3B`
- **Deep Purple (Secondary)**: `#4B1D6B`
- **Cyan (Accent)**: `#00C2D1`

### 1.3 Icons (must)
- Tumia icons kwenye: navigation, buttons, status (success/error), empty states.
- Usichanganye icon sets; chagua set moja (mf: Heroicons/Lucide).

### 1.4 Plan/Package Card Background (Blue “plan-like”)
> Background ya plan/package isiwe sawa na background ya system.
- Plan cards zitumie “soft blue/gradient” mfano:
  - **Plan BG**: `#EAF4FF`
  - **Plan Border**: `#BBD9FF`
  - **Plan Hover**: `#DCEEFF`
  - Optional gradient: `linear-gradient(135deg, #EAF4FF 0%, #D7ECFF 100%)`

**Acceptance:**
- Home na plan list: cards zote za plan zionekane na blue plan background.
- System background (general pages) ibaki neutral (light) bila kuchanganya na plan cards.

---

## 2) SHIDA YA GROUPING YA PLAN (7d/1w, 14d/2w, 30d/1m) ✅
### 2.1 Expected Behavior
- Admin akiweka:
  - **7 days** au **1 week**  → Group: **1 WEEK**
  - **14 days** au **2 weeks** → Group: **2 WEEKS**
  - **30 days** au **1 month** → Group: **1 MONTH**
- Plan ambayo haipo kwenye hizo → Group: **OTHER** (plan ya kujitegemea)

### 2.2 Why 14 days inaangukia 1 week group (Chanzo kikuu)
Mara nyingi hutokea kwa sababu ya:
1. **Range logic mbaya**: mfano `if ($days <= 14) group = 1week` (hii huweka 14 kwenye 1week).
2. **Integer division / rounding**: mfano `$weeks = (int)($days/7)` kisha logic ya `<=1` au `round()` ikileta 1.
3. **String/number mismatch**: “14” (string) inalinganishwa vibaya au unit haijanormalize.
4. **Unit conversion bug**: 2 weeks haigeuzwi vizuri kuwa 14 days kabla ya kuwekwa group.

### 2.3 FIX (Standard Normalization) ✅
**Rule:** Kila plan lazima ipitie “normalization” kabla ya ku-save:
1. Convert duration yote kuwa **duration_days** (integer)
2. Weka **duration_group_key** kwa strict mapping
3. Save both values ili display/filters ziwe consistent

#### Canonical mapping (STRICT)
- `duration_days == 7`  → `group_key = week_1`
- `duration_days == 14` → `group_key = week_2`
- `duration_days == 30` → `group_key = month_1`
- Else → `group_key = other`

#### Notes
- Ukiruhusu admin kuandika “1 week/2 week/1 month”, lazima u-convert:
  - 1 week → 7
  - 2 week → 14
  - 1 month → 30 (kwa system yako hii ndiyo standard)
- Usitumie `<=` kwa group selection. Tumia `==` kwa 7/14/30.

#### Pseudocode (logic ya kutekeleza)
